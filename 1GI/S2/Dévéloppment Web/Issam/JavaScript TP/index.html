<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
lignes : <input type="text" id="l" value="10"> <br>
colonnes : <input type="text" id="c" value="10"> <br>
<button onclick="afficher()">Afficher</button>
<div id="out"></div>

<style>
    #out td {
        width: 20px;
        height: 20px;
    }
</style>
<script>
    function makeTable(rows, cols) {
        var table = "<table border='1'>\n"
        for(i=0; i<rows; i++) {
            table += "\t<tr>\n"
            for(j=0;j<cols; j++)
                table += "\t\t<td onclick='changeColor(this)'></td>\n"
            table += "\t</tr>\n"
        }
        return table + "</table>"
    }
    function makeTable2(rows, cols) {
        var table = document.createElement('table')
        table.setAttribute('border', 1);
        for(var i=0; i<rows; i++) {
            var tr = document.createElement('tr')
            table.appendChild(tr);
            for(var j=0; j<cols; j++) {
                var td = document.createElement('td')
                tr.appendChild(td);
                td.setAttribute('onclick', 'changeColor(this)');
            }
        }
        return table
    }

    function changeColor(td) {
        td.style.backgroundColor = getRandomColor()
    }

    function getRandomColor() {
        var r = Math.round(Math.random()*255)
        var v = Math.round(Math.random()*255)
        var b = Math.round(Math.random()*255)
        return 'rgb(' + r + ',' + v + ',' + b + ')'
    }

    function afficher() {
        var l = document.querySelector('#l').value
        var c = document.querySelector('#c').value
        //document.querySelector('#out').innerHTML = makeTable(l,c)
        madiv =document.querySelector('#out');
        madiv.innerHTML = ''
        madiv.appendChild(makeTable2(l,c));
    }
</script>
</body>
</html>